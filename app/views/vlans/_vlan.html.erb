<!-- Partial to list the VLANs in a table with index -->
<!-- Comment count, the hidden method _counter. -->
<!--
  See http://www.web-development-blog.co.uk/2009/02/18/57/
  When rendering a collection of partials in Rails you can access
  a sneaky iteration counter from inside each partial using the partial
  name appended with _counter, which starts from 0.
 -->
<!--
  As the render method iterates over the @lan.vlans collection,
  it assigns each vlan to a local variable named the same as the partial,
  in this case vlan which is then available in the partial for us to show.
-->
<tr>
  <td><%= vlan_counter + 1 %></td>
  <!-- Call the helper method from the helper class to retrieve the LAN name -->
  <!-- Or call the model directly: Lan.find(vlan.lan_id).lan_name -->
  <td><%= find_lan_name(vlan.lan_id) %></td>
  <td>
    <a href="#" data-xeditable="true" data-pk="<%= vlan.id %>" data-model="vlan" data-name="vlan_number" data-url="<%= vlan_path(vlan) %>" data-title="VLAN Number"><%= vlan.vlan_number %></a>
  </td>
  <td>
    <a href="#" data-xeditable="true" data-pk="<%= vlan.id %>" data-model="vlan" data-name="vlan_name" data-url="<%= vlan_path(vlan) %>" data-title="VLAN Name"><%= vlan.vlan_name %></a>
  </td>
  <td>
    <a href="#" data-xeditable="true" data-pk="<%= vlan.id %>" data-model="vlan" data-name="static_ip_start" data-url="<%= vlan_path(vlan) %>" data-title="Static IP Start"><%= vlan.static_ip_start %></a>
  </td>
  <td>
    <a href="#" data-xeditable="true" data-pk="<%= vlan.id %>" data-model="vlan" data-name="static_ip_end" data-url="<%= vlan_path(vlan) %>" data-title="Static IP End"><%= vlan.static_ip_end %></a>
  </td>
  <td>
    <a href="#" data-xeditable="true" data-pk="<%= vlan.id %>" data-model="vlan" data-name="subnet_mask" data-url="<%= vlan_path(vlan) %>" data-title="Subnet Mask"><%= vlan.subnet_mask %></a>
  </td>
  <td>
    <a href="#" data-xeditable="true" data-pk="<%= vlan.id %>" data-model="vlan" data-name="gateway" data-url="<%= vlan_path(vlan) %>" data-title="Gateway"><%= vlan.gateway %></a>
  </td>
  <td>
    <a href="#" data-xeditable="true" data-pk="<%= vlan.id %>" data-model="vlan" data-name="vlan_description" data-url="<%= vlan_path(vlan) %>" data-title="Description"><%= vlan.vlan_description %></a>
  </td>

  <!-- Links -->  
  <% if policy(vlan).show? %>
    <td><%= link_to 'Show', vlan, lan_id: vlan.lan_id, class: 'btn btn-primary btn-xs' %></td>
  <% end %>

  <% if policy(vlan).edit? %>
    <td>
    <%= link_to edit_vlan_path(vlan), class: 'btn btn-info btn-xs' do %>
      <i class="glyphicon glyphicon-edit"></i> Edit
    <% end %>
    </td>
  <% end %>

  <% if policy(vlan).destroy? %>
    <td>
    <%= link_to vlan, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger btn-xs' do %>
      <i class="glyphicon glyphicon-remove"></i> Destroy
    <% end %>
    </td>
  <% end %>
</tr>
