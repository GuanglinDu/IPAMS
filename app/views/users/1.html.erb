<!DOCTYPE html>
<html>
<h1>Listing users</h1>
<head>
    <title>Twitter Bootstrap : Collapse accordion using Data Attributes</title>
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap-theme.min.css">
    <script src="http://code.jquery.com/jquery.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
</head>

<style>
.DemoBS2{
    margin:20px;
}
p{
    background:#444;
    color:#4ee255;
    padding:10px;
    margin:10px 0px;
    border:2px solid #fa4b2a;
    border-radius:10px;
    box-shadow:4px 4px 4px #ccc;
}
</style>

<table class="table table-striped table-condensed">
  <thead>
  <tr>
    <th>NO.</th>
    <th>Name</th>
    <th>IP Address</th>
    <th>Office phone</th>
    <th>Cell phone</th>
    <th>Email</th>
    <th>Building</th>
    <th>Storey</th>
    <th>Room</th>
    <th>Department</th>
    <th></th>
    <th></th>
  </tr>
  </thead>


  <tbody>
  <% count = 0 %>
  <% @users.each do |user| %>
  <% count += 1 %>
    <tr>
      <td><%= count %></td>
      <td>
        <a href="#" data-xeditable="true" data-pk="<%= user.id %>" data-model="user" data-name="name" data-url="<%= user_path(user) %>" data-title="User Name"><%= user.name %></a>
      </td>
      <td>
        <% if user.name != "NOBODY" %>
          <% if user.addresses.count >= 2 %>

          <div class="DemoBS2">
          <!-- Toogle Buttons -->
            <button type="button" class="btn btn-warning" 
  data-toggle="collapse" data-target="#toggle-example"><%= uas = user.addresses.first.ip %></button>
 
              <div id="toggle-example" class="collapse in">
                <% ubs = user.addresses %><%ubs.each do |addr| %><%= addr.ip %><br /><% end %>
              </div>
          </div>
          <%elsif  ucs = user.addresses %><%ucs.each do |addr| %><%= addr.ip %><br /><% end %>
          <% end %>
        <% end %>
      </td>
      <td>
        <a href="#" data-xeditable="true" data-pk="<%= user.id %>" data-model="user" data-name="office_phone" data-url="<%= user_path(user) %>" data-title="Office Phone"><%= user.office_phone %></a>
      </td>
      <td>
        <a href="#" data-xeditable="true" data-pk="<%= user.id %>" data-model="user" data-name="cell_phone" data-url="<%= user_path(user) %>" data-title="Mobile"><%= user.cell_phone %></a>
      </td>
      <td>
        <a href="#" data-xeditable="true" data-pk="<%= user.id %>" data-model="user" data-name="email" data-url="<%= user_path(user) %>" data-title="Email"><%= user.email %></a>
      </td>
      <td>
        <a href="#" data-xeditable="true" data-pk="<%= user.id %>" data-model="user" data-name="building" data-url="<%= user_path(user) %>" data-title="Building"><%= user.building %></a>
      </td>
      <td>
        <a href="#" data-xeditable="true" data-pk="<%= user.id %>" data-model="user" data-name="storey" data-url="<%= user_path(user) %>" data-title="Mobile"><%= user.storey %></a>
      </td>
      <td>
        <a href="#" data-xeditable="true" data-pk="<%= user.id %>" data-model="user" data-name="room" data-url="<%= user_path(user) %>" data-title="Room"><%= user.room %></a>
      </td>
      <td>
        <a href="#" data-xeditable="true" data-pk="<%= user.id %>" data-model="user" data-name="department_id" data-url="<%= user_path(user) %>" data-title="Department"><%= find_department_name(user.department_id) %></a>
      </td>
      <td><%= link_to 'Show', user, class: 'btn btn-primary btn-xs' %></td>
      <!-- Editing link disabled since in-line editing supported
         link_to edit_user_path(user), class: 'btn btn-info btn-xs' do
           class="glyphicon glyphicon-edit" Edit
         end
      -->
      <td>
        <%= link_to user, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger btn-xs' do %>
          <i class="glyphicon glyphicon-remove"></i> Destroy
        <% end %>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>
</html>
